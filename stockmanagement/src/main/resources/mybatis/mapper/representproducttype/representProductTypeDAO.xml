<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.estock.stockmanagement.dao.representtypeproduct.RepresentTypeProductDAO">
    
    <resultMap type="RepresentProductTypeAdapter" id="representProductTypeAdapter">
        <id property="id" column="id"/>
        <result property="productId" column="product_id"/>
        <result property="saleTypeName" column="sale_type_name"/>
        <result property="unitPrice" column="unit_price"/>
        <result property="totalPrice" column="total_price"/>
        <result property="qty" column="qty"/>
        <result property="dateTime" column="modify_date"/>
        <result property="userId" column="modify_by"/>
        <result property="stutas" column="status"/>
    </resultMap>
    
    <select id="countRepresentTypeProduct" resultType="java.lang.Integer">
        <![CDATA[
			select coalesce(MAX(id), 0) FROM  represent_type_product;
	   ]]>
    </select>
    
    <insert id="addNewRepresentTypeProduct">
        <![CDATA[
           INSERT INTO represent_type_product
			(id, product_id, sale_type_name, qty, unit_price, total_price, create_date, create_by, modify_date, modify_by, status)
			VALUES(#{id}, #{productId}, #{saleTypeName}, #{qty}, #{unitPrice}, #{totalPrice}, #{dateTime}, #{userId},#{dateTime}, #{userId}, #{stutas});
        ]]>
    </insert>
    

	<select id="inquiryById" resultMap="representProductTypeAdapter">
        <![CDATA[
			SELECT 
				id
				, product_id
				, sale_type_name
				, qty
				, unit_price
				, total_price
				, modify_date
				, modify_by
				, status
			FROM represent_type_product
			WHERE id = #{id} and status != #{status};
	   ]]>
    </select>
    
    <select id="inquiryAll" resultMap="representProductTypeAdapter">
        <![CDATA[
			SELECT 
				id
				, product_id
				, sale_type_name
				, qty
				, unit_price
				, total_price
				, modify_date
				, modify_by
				, status
			FROM represent_type_product
			WHERE status != #{status};
	   ]]>
    </select>
    
</mapper>